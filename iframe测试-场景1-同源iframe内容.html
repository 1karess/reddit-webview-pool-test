<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>åŒæºiframeå†…å®¹</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #e8f4f8;
        }
        .info {
            background: white;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h3>ğŸ–¼ï¸ è¿™æ˜¯åŒæºiframe</h3>
    <div class="info">
        <p><strong>å½“å‰originï¼š</strong><span id="origin"></span></p>
        <p><strong>localStorageæ•°æ®ï¼š</strong></p>
        <pre id="localStorageData">ï¼ˆç©ºï¼‰</pre>
    </div>

    <script>
        // æ˜¾ç¤ºå½“å‰origin
        document.getElementById('origin').textContent = window.location.origin;

        // è¯»å–localStorage
        function readLocalStorage() {
            const data = {};
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                data[key] = localStorage.getItem(key);
            }
            
            const result = Object.keys(data).length > 0 
                ? JSON.stringify(data, null, 2)
                : 'ï¼ˆç©ºï¼‰';
            
            document.getElementById('localStorageData').textContent = result;
            
            // å‘é€ç»™çˆ¶é¡µé¢
            if (window.parent !== window) {
                window.parent.postMessage({
                    type: 'localStorageData',
                    data: data
                }, '*');
            }
        }

        // æ¸…ç©ºlocalStorage
        function clearLocalStorage() {
            localStorage.clear();
            readLocalStorage();
        }

        // ç›‘å¬çˆ¶é¡µé¢çš„æ¶ˆæ¯
        window.addEventListener('message', function(event) {
            if (event.data && event.data.action === 'readLocalStorage') {
                readLocalStorage();
            } else if (event.data && event.data.action === 'clearLocalStorage') {
                clearLocalStorage();
            }
        });

        // è‡ªåŠ¨è¯»å–
        readLocalStorage();
        
        // å®šæœŸæ›´æ–°ï¼ˆæ¯2ç§’ï¼‰
        setInterval(readLocalStorage, 2000);
    </script>
</body>
</html>
