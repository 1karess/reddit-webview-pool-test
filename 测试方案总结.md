# Reddit WebView Pool 风险测试 - 方案总结

## 当前情况

✅ **已完成：**
- Mac 环境搭建完成
- 手机连接成功
- Chrome DevTools 可以连接

❌ **问题：**
- Chrome DevTools 看不到 Reddit App 的 WebView（Reddit 可能禁用了调试）
- Frida 在 M4 Pro 上崩溃（Python 3.14 兼容性问题）

---

## 可用方案

### 方案 1：adb logcat 监控（推荐，最简单）

**优点：**
- ✅ 不需要 Frida
- ✅ 不需要 Chrome DevTools
- ✅ 可以监控 WebView 的创建、URL 加载等

**缺点：**
- ❌ 不能直接查看 localStorage 内容
- ❌ 只能看到日志输出

**使用方法：**
```bash
./监控WebView.sh
```

然后在手机上：
1. 打开 Reddit App
2. 进入包含 WebView 的页面
3. 观察终端输出的日志

---

### 方案 2：尝试启用 WebView 调试（需要尝试）

Reddit App 可能禁用了 WebView 调试。可以尝试：

```bash
# 尝试启用全局 WebView 调试
adb shell "setprop debug.webview.provider com.reddit.frontpage"
```

然后重新打开 Chrome DevTools 看看。

---

### 方案 3：使用 adb shell 直接检查

如果 Reddit App 的 WebView 数据存储在特定位置，可以直接检查：

```bash
# 检查 WebView 数据目录
adb shell "run-as com.reddit.frontpage ls -la /data/data/com.reddit.frontpage/app_webview/"
```

---

## 推荐测试流程

1. **先用方案 1（logcat 监控）**
   - 运行 `./监控WebView.sh`
   - 在手机上打开 Reddit 的 WebView 页面
   - 观察日志，看是否有 WebView 创建、URL 加载等信息

2. **如果能看到 WebView 活动**
   - 记录日志中的关键信息
   - 分析是否有跨账号的数据残留

3. **如果需要更详细的数据**
   - 尝试方案 2（启用调试）
   - 或者考虑修复 Frida（降级 Python）

---

## 下一步

运行 `./监控WebView.sh`，然后在手机上：
1. 登录账号 A
2. 打开 Reddit 的 WebView 页面
3. 关闭页面
4. 切换到账号 B
5. 再次打开 WebView 页面

观察日志输出，看是否有数据残留的迹象。
