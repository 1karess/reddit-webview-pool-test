# Reddit WebView Pool 风险测试 - 操作指南

## 🚀 开始测试

### 第 1 步：启动监控

在终端运行：
```bash
cd ~/Desktop/reddit-code
./开始监控.sh
```

**保持这个终端窗口打开**，你会看到实时日志输出。

---

### 第 2 步：在手机上操作（账号 A）

1. **打开 Reddit App**
2. **登录账号 A**（如果还没登录）
3. **找到一个会打开 WebView 的页面**，例如：
   - 某个帖子里的链接
   - DevPlatform 相关的内容
   - 任何 App 内的网页视图
4. **打开这个 WebView 页面**
5. **观察终端日志**，应该能看到：
   - `WebView` 相关的日志
   - `DevPlatform` 相关的日志
   - URL 加载信息

6. **在 WebView 页面停留几秒**，让日志充分记录

7. **关闭这个 WebView 页面**（返回上一页）

---

### 第 3 步：切换到账号 B

1. **在 Reddit App 中退出账号 A**
2. **登录账号 B**
3. **等待几秒**，让 App 完全切换账号

---

### 第 4 步：再次打开 WebView（账号 B）

1. **再次打开同一个或类似的 WebView 页面**
2. **观察终端日志**，特别关注：
   - 是否有 `WebView` 复用的迹象
   - 是否有之前账号的数据残留
   - URL 加载信息

---

### 第 5 步：分析结果

**观察日志中的关键信息：**

1. **WebView 创建/复用**：
   - 如果看到同一个 WebView 实例被多次使用，可能是 Pool 复用

2. **URL 加载**：
   - 记录账号 A 访问的 URL
   - 记录账号 B 访问的 URL
   - 看是否有异常

3. **数据残留迹象**：
   - 虽然不能直接看到 localStorage，但可以通过其他日志推断

---

## 📝 需要记录的信息

测试时，请记录：

1. **账号 A 打开 WebView 时的日志**（截图或复制）
2. **账号 B 打开 WebView 时的日志**（截图或复制）
3. **是否有 WebView 复用的迹象**
4. **两个账号访问的 URL 是否相同**

---

## ⚠️ 注意事项

- **保持监控脚本运行**，不要关闭终端
- **如果日志太多**，可以按 `Ctrl+C` 停止，然后重新运行
- **如果看不到 WebView 相关日志**，可能：
  - 当前页面不是用 WebView 打开的
  - 需要找到真正的 WebView 页面

---

## 🆘 如果看不到任何日志

如果运行监控后，在手机上操作但终端没有任何输出：

1. **确认 Reddit App 真的在使用 WebView**
   - 不是系统浏览器
   - 是 App 内的页面

2. **尝试更宽泛的监控**：
   ```bash
   adb logcat | grep -i "reddit\|webview" --color=always
   ```

3. **检查 App 是否在运行**：
   ```bash
   adb shell "ps | grep reddit"
   ```

---

## ✅ 完成测试后

1. **停止监控**（按 `Ctrl+C`）
2. **把日志发给我**，我帮你分析
3. 或者告诉我你观察到了什么
